<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Magical website of Henry Bogaeus">
    <meta name="author" content="Henry Bogaeus">

    <title>Bogaeus</title>
    <link href="https://fonts.googleapis.com/css?family=Quicksand|Source+Sans+Pro" rel="stylesheet">
    <!-- <link rel="stylesheet" href="<%= static_path(@conn, "/dist/index.css") %>"> -->
    <!-- <script src="https://sdk.scdn.co/spotify-player.js"></script> -->


    <script>
      window.APP = <%= raw Poison.encode!(%{spotify_name: @spotify_name, access_token: @access_token, profile_image_url: @profile_image_url}) %>

      /*
      window.onSpotifyWebPlaybackSDKReady = () => {
      const token = window.APP.access_token;
      const player = new Spotify.Player({
        name: 'Web Playback SDK Quick Start Player',
        getOAuthToken: cb => { cb(token); }
      });

      // Error handling
      player.addListener('initialization_error', ({ message }) => { console.error(message); });
      player.addListener('authentication_error', ({ message }) => { console.error(message); });
      player.addListener('account_error', ({ message }) => { console.error(message); });
      player.addListener('playback_error', ({ message }) => { console.error(message); });

      // Playback status updates
      player.addListener('player_state_changed', ({
        position,
        duration,
        track_window: { current_track }
      }) => {
        console.log('Currently Playing', current_track);
      });

      // Ready
      player.addListener('ready', ({ device_id }) => {
        console.log('Ready with Device ID', device_id);
      });

      // Connect to the player!
      player.connect();

      window.SPOTIFY_PLAYER = player;


    };
      */

    </script>
  </head>

  <body>
    <div id="root"></div>
    <%= if Mix.env() == :dev do %>
      <script  src='http://localhost:3000/bundle.js'></script>
    <% else %>
      <script src="<%= static_path(@conn, "/dist/bundle.js") %>"></script>
    <% end %>
  </body>
</html>
